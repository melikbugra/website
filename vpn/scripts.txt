docker compose run --rm openvpn ovpn_genconfig -u udp://195.201.98.37
docker compose run --rm openvpn ovpn_initpki

docker compose run --rm openvpn easyrsa build-client-full CLIENTNAME nopass
docker compose run --rm openvpn ovpn_getclient CLIENTNAME > CLIENTNAME.ovpn



Enable IP Forwarding: Edit /etc/sysctl.conf to ensure the following line is uncommented:
net.ipv4.ip_forward=1

Apply the changes:
sudo sysctl -p

sudo iptables -t nat -A POSTROUTING -s 10.8.0.0/24 -o eth0 -j MASQUERADE

sudo apt install iptables-persistent
sudo netfilter-persistent save

docker run -it --rm -v ./ovpn-data:/etc/openvpn kylemanna/openvpn easyrsa build-client-full melikpc nopass
docker run --rm -v ./ovpn-data:/etc/openvpn kylemanna/openvpn ovpn_getclient melikpc > melikpc.ovpn
scp root@195.201.98.37:/root/website/vpn/melikpc.ovpn .


docker run --rm -v "$PWD/ovpn-data":/etc/openvpn kylemanna/openvpn \
  ovpn_genconfig \
  -u udp://195.201.98.37 \
  -n 1.1.1.1 -n 9.9.9.9 \
  -p "redirect-gateway def1" \
  -C "AES-256-GCM" -a "SHA256"

init-pki complete; you may now create a CA or requests.
Your newly created PKI dir is: /etc/openvpn/pki


Using SSL: openssl OpenSSL 1.1.1g  21 Apr 2020

Enter New CA Key Passphrase: 
